package com.medicalcenterportal.apis;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.medicalcenter.entities.User;
import com.medicalcenter.exceptions.UserNotFoundException;
import com.medicalcenter.services.UserService;

@RestController
@RequestMapping({"/apis/v1/profile", "/apis/test/profile"})
public class ProfileRestController {

	@Autowired
	private UserService userService;
	
	@PostMapping
	public User updateProfile(@RequestBody User user) throws UserNotFoundException {
		// Kiểm tra xem người dùng có tồn tại trong cơ sở dữ liệu hay không
		User existingUser = userService.get(user.getId());
		
		// Cập nhật thông tin hồ sơ từ dữ liệu được gửi trong yêu cầu
		existingUser.setFirstName(user.getFirstName());
		existingUser.setLastName(user.getLastName());
		existingUser.setDateOfBirth(user.getDateOfBirth());
		existingUser.setGender(user.getGender());
		// Cập nhật các thông tin khác tương tự
		
		// Lưu thông tin hồ sơ đã cập nhật vào cơ sở dữ liệu
		User updatedUser = userService.updateAccount(existingUser);
		
		// Trả về thông tin người dùng đã được cập nhật
		return updatedUser;
	}
}
